In a Firebase project, I encountered an unusual issue where data wasn't persisting correctly across sessions, even with proper rules and offline persistence enabled.  The problem was intermittent and only affected specific devices or users.  Adding more logging revealed that the `onSnapshot` listener for my Firestore collection was not reliably triggering updates, even when the data changed. The application would sometimes update the UI correctly, sometimes not at all, and sometimes with delays.